<div class="container col-4 border border-2 bg-primary-subtle rounded-3 p-3 my-4 ">
    <h4 class="text-center">Registration Page</h4>

    @if (registrationStatus.message === 'Not attempted yet') {
    
        <form [formGroup]="form" class="d-flex flex-column mt-4 px-5" action="post">
            <mat-form-field>
                <mat-label>Username </mat-label>

                <input matInput type="text" formControlName= "Username" />
                @if (form.get('Username').invalid && form.get('Username').touched) {

                    <mat-error> Username is required </mat-error>
                }
            </mat-form-field>
    
            <mat-form-field>
                <mat-label> Password </mat-label>

                <input matInput type="password" formControlName= "Password" />
                @if (form.get('Password').invalid && form.get('Password').touched) {

                    <mat-error> Password is missing or invalid </mat-error>
                }
            </mat-form-field>
        
            <mat-form-field>
                <mat-label>Confirm Password </mat-label>
                <input matInput type="password" formControlName= "confirmPassword" />
                @if(form.get("confirmPassword").hasError("passwordMismatch")) {

                    <mat-error> Passwords do not match </mat-error>

                } @else if (form.get('confirmPassword').invalid && form.get('confirmPassword').touched) {

                    <mat-error> Password is missing or invalid </mat-error>
                }
            </mat-form-field>
    
            <mat-form-field>
                <mat-label> Email </mat-label>

                <input matInput type="text" (blur)="check_duplicate_email()" formControlName= "Email" />
                @if (form.get('Email').invalid && form.get('Email').touched) {

                    <mat-error> Email is missing or invalid </mat-error>
                }
                @if (form.get("Email").hasError("duplicateEmail")) {

                    <mat-error> Email is already registered </mat-error>
                }

            </mat-form-field>
    
            <mat-form-field>
                <mat-label> First name </mat-label>
                
                <input matInput type="text" formControlName= "FirstName" />
                @if (form.get('FirstName').invalid && form.get('FirstName').touched) {

                    <mat-error> First name is required </mat-error>
                }
            </mat-form-field>
        
            <mat-form-field>

                <mat-label> Last name </mat-label>
                <input matInput type="text" formControlName= "LastName" />
                @if (form.get('LastName').invalid && form.get('LastName').touched) {

                    <mat-error> Last name is required </mat-error>
                }
            </mat-form-field>

            <mat-form-field>

                <mat-label> Phone Number </mat-label>
                <input matInput type="text" formControlName= "PhoneNumber" />
                @if (form.get('PhoneNumber').invalid && form.get('PhoneNumber').touched) {

                    <mat-error> Phone number is required </mat-error>
                }
            </mat-form-field>
        
            <button mat-flat-button color="primary" class="my-2" [disabled]="form.invalid" (click)="onSubmit(form.value)" >Register</button>
        </form>
    
    } @else {
        @if (registrationStatus.success) {
            <div class="alert alert-success mt-2 w-50 d-flex flex-column align-items-center">
                <strong>Success:</strong> {{ registrationStatus.message}}
                <a role="button" routerLink='../login'>Go to the login page</a>
            </div>
        } @else { 
            <div class="alert alert-danger mt-2 w-50 ">
                <strong>Error:</strong> {{ registrationStatus.message}}
            </div>
        }
    }
</div>

